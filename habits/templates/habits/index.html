<!--index.html -->

{% extends "habits/base.html" %}
{% block title %}Home - Habit Tracker{% endblock %}

{% block content %}

<h2 class="text-center">Your habits</h2>

{% if user.is_authenticated %}

  <a href="{% url 'habits_create' %}" class="btn btn-success mb-3">Add Habit</a>


  <ul class="habits-list list-unstyled">
    {% for habit in habits %}
      <li class="habits-item d-flex align-items-center justify-content-between mb-2">
        {# Added Bootstrap flex classes: d-flex align-items-center justify-content-between #}

        {# Toggle completion form #}
        <form action="{% url 'habit_toggle' habit.pk %}" method="post" class="m-0 p-0">
          {% csrf_token %}
          <label class="habits-checkbox mb-0">
            <input type="checkbox" onchange="this.form.submit()" {% if habit.completed_today %}checked{% endif %}>
            <span class="{% if habit.completed_today %}completed{% endif %}">
              {{ habit.title }}
            </span>
          </label>
        </form>

        <div class="habit-buttons">
          {# Edit Button #}
          <a href="{% url 'habits_update' habit.pk %}" class="btn btn-primary btn-sm custom-edit-btn"
             aria-label="Edit habit: {{ habit.title }}">Edit</a>

          {# Delete Button #}
          <a href="{% url 'habits_delete' habit.pk %}" class="btn btn-danger btn-sm custom-delete-btn"
             aria-label="Delete habit: {{ habit.title }}">Delete</a>
        </div>
      </li>
    {% endfor %}
  </ul>

  {% else %}
<p>No habits yet! <a href="{% url 'habits_create' %}">Add a habit</a></p>
{% endif %}

{% endblock %}
